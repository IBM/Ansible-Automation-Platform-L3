
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Creation of a Template - Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales" class="md-header__button md-logo" aria-label="Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creation of a Template
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales" class="md-nav__button md-logo" aria-label="Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Red Hat Ansible Automation Platform Level 3 for Sales and Technical Sales
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Part 1 - Prerequisites and Provisioning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 1 - Prerequisites and Provisioning" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Part 1 - Prerequisites and Provisioning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%201/01%20Getting%20Started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Part 2 - Deploy a Virtual Machine via Ansible Automation Platform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 2 - Deploy a Virtual Machine via Ansible Automation Platform" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Part 2 - Deploy a Virtual Machine via Ansible Automation Platform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%202/01%20Deploy%20a%20VM/" class="md-nav__link">
        Deploy a Virtual Machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%202/02%20Deploy%20an%20AIX%20Partition/" class="md-nav__link">
        Deploy an AIX Partition on PowerVC using Ansible
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Part 3 - Deploy a WebSphere Application Server using Ansible Automation Platform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 3 - Deploy a WebSphere Application Server using Ansible Automation Platform" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Part 3 - Deploy a WebSphere Application Server using Ansible Automation Platform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01%20Laying%20the%20Groundwork/" class="md-nav__link">
        Laying the Groundwork
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02%20Creating%20Roles%20for%20WAS/" class="md-nav__link">
        Creating Roles for WAS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03%20Staging%20and%20Execution/" class="md-nav__link">
        Creating the Staging Directory for WAS, Copying Source Files, and Executing the Installer
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Creation of a Template
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05%20Launching%20WAS/" class="md-nav__link">
        Installation of WAS, Creation of a Profile, and Launching the Software
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Part 4 - Level 3 Accreditation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 4 - Level 3 Accreditation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Part 4 - Level 3 Accreditation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%204/01%20Business%20Partner%20Accreditation/" class="md-nav__link">
        Business Partner Accreditation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%204/02%20IBMer%20Accreditation/" class="md-nav__link">
        IBM Seller and Technical Seller Accreditation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Creation of a Template</h1>

<p><div class="video-container"><iframe src="../_videos/Part%203d%20-%20Creation%20of%20a%20Template%20-%20Red%20Hat%20Ansible%20Automation%20Platform%20Level%203%20for%20Sales%20and%20Technical%20Sales.mp4" style="position: relative; width: 100%; height: 22.172vw" frameborder="0" allowfullscreen></iframe></div></p>
<div class="admonition tip">
<p class="admonition-title">WAYS TO WATCH</p>
<p>In addition to the embedded video, IBMers and Business Partners can also <a href="https://ibm.seismic.com/Link/Content/DCJh6Jdm8C8gXG4R2WmT62hc42cB" target="_blank">download the recording from Seismic</a>.</p>
</div>
<p><strong>WebSphere Installation Manager</strong> requires an XML file (known as a <strong>response file</strong>) to detail where the installation should take place, the version of WAS to be installed, the versions of Java and other dependencies, and so on. The file must be located inside of the <em>roles/was/templates</em> directory and titled <strong>was90501.sdk8035.xml</strong> for the purposes of this lab.</p>
<p>The directory structure will look like the following:</p>
<p><img alt="" src="../_attachments/part3_figure5.png" /></p>
<p>AAP has a number of modules that can be used to modify existing files. These include <strong>lineinfile</strong> and <strong>blockinfile</strong>, among others. However, they are not always easy to use effectively and correctly. A much more powerful way to manage files is to template them. With this method, you can write a template configuration file that is automatically customized for the managed host when the file is deployed, using Ansible <strong>variables</strong> and <strong>facts</strong>. This can be easier to control and is less error-prone.</p>
<p>Ansible uses the <strong>Jinja2</strong> templating system for template files. Ansible also uses Jinja2 syntax to reference variables in Playbooks, and as such it will look structurally similar to what you have seen previously with YAML-based Playbooks. A Jinja2 template is composed of multiple elements: data, variables, and expressions. Those variables and expressions are replaced with their values when the Jinja2 template is rendered. You will see an example of this shortly after we execute the Playbook and compare how the variables defined within the XML file are changed.</p>
<p>The variables of note, specific to this environment, are highlighted in the screenshot below with red text. You <strong>do not</strong> need to modify this template from how it is written â€” these variables are highlighted only to showcase what is different from the standard Installation Manager boilerplate. Your XML file must mirror the following template before continuing with the hands-on material.</p>
<p><img alt="" src="../_attachments/part3_figure6.png" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt; &lt;agent-input&gt;
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>&lt;variables&gt;
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>&lt;variable name=&#39;sharedLocation&#39; value=&#39;/usr/IBM/IMShared&#39;/&gt;
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  &lt;/variables&gt;
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  &lt;server&gt;
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>&lt;repository location=&#39;{{was_repo}}{{was_90501_file}}&#39;/&gt;
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>&lt;repository location=&#39;{{was_repo}}{{sdk_8035_file}}&#39;/&gt; &lt;/server&gt;
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>&lt;profile id=&#39;IBM WebSphere Application Server V9.0&#39;
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>installLocation=&#39;/usr/IBM/WebSphere/AppServer&#39;&gt; &lt;data key=&#39;cic.selector.arch&#39; value=&#39;ppc64&#39;/&gt; &lt;data key=&#39;cic.selector.ws&#39; value=&#39;gtk&#39;/&gt;
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>  &lt;/profile&gt;
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  &lt;install&gt;
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>&lt;!-- IBM WebSphere Application Server 9.0.5.1 --&gt;
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>&lt;offering profile=&#39;IBM WebSphere Application Server V9.0&#39; id=&#39;com.ibm.websphere.BASE.v90&#39; version=&#39;9.0.5001.20190828_0616&#39; features=&#39;core.feature,ejbdeploy,thinclient,embeddablecontainer&#39;/&gt;
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>&lt;!-- IBM SDK, Java Technology Edition, Version 8 8.0.5.35 --&gt;
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>&lt;offering profile=&#39;IBM WebSphere Application Server V9.0&#39; id=&#39;com.ibm.java.jdk.v8&#39; version=&#39;8.0.5035.20190422_0948&#39; features=&#39;com.ibm.sdk.8&#39;/&gt;
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>&lt;/install&gt;
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>&lt;preference name=&#39;com.ibm.cic.common.core.preferences.eclipseCache&#39; value=&#39;${sharedLocation}&#39;/&gt;
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>&lt;/agent-input&gt;
</code></pre></div>
<p>Edit (or create) the XML response file by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>vi roles/was/templates/was90501.sdk8035.xml
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">was90501.sdk8035.xml</p>
<p><strong>Technical Sellers</strong>: Replicate the code template above and create the XML file.</p>
<p><strong>Sellers</strong>: Leave the XML file unmodified.</p>
</div>
<p>When satisfied, press <code>ESC</code> followed by <code>:x</code> and <code>Return</code> to save and edit the file.</p>
<p>Now you must set default variables for the WAS Roles, which will be used later when generating the response file for the Installation Manager.</p>
<p>The YAML file definition should mirror the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>was_repo: /tmp/wasrepo/
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>was_90501_file: was.repo.90501.base.zip
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>sdk_8035_file: sdk.repo.8035.java8.aix.zip
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>was_90501_source_dir: /files/aix/websphere/was/was9051/
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>sdk_8035_source_dir: /files/aix/websphere/sdk/sdk8035/
</code></pre></div>
<p>Edit (or create) the following YAML template file:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>vi roles/was/defaults/main.yml
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">roles/was/defaults/main.yml</p>
<p><strong>Technical Sellers</strong>: Replicate the code template above and create the YAML file.</p>
<p><strong>Sellers</strong>: Leave the YAML file unmodified.</p>
</div>
<p>You are now ready to make additional modifications to the primary Playbook, instructing Ansible to generate and upload the template for WAS. The extensions to the Playbook will create a directory <strong>was_repo: /tmp/wasrepo/</strong> and then instruct Ansible to upload WAS binaries to the target system.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>---
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>- name: Creating staging directory
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  file:
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    path: /tmp/im
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    state: directory
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>- name: copying IM source files
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>  unarchive:
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    src: /files/aix/websphere/InstallationManager/1.8.9.4/aix.gtk.ppc_1.8.9004.20190423_2015.zip
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    dest: /tmp/im
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    creates: /tmp/im/userinstc.ini
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>- name: installing installation manager
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>  shell: /tmp/im/installc -log /tmp/im.lof -acceptLicense
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>- name: uploading was installation response file
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>  template:
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    src: templates/was90501.sdk8035.xml
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>    dest: /tmp/was90501.sdk8035.xml
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>- name: Creating wasrepo directory
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>  file:
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>    path: &quot;{{was_repo}}&quot;
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>    state: directory
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>- name: copying binaries to wasrepo
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>  copy:
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>    src: &quot;{{item}}&quot;
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>    dest: &quot;{{was_repo}}&quot;
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>  loop:
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>    - &quot;{{was_90501_source_dir}}{{was_90501_file}}&quot;
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>    - &quot;{{sdk_8035_source_dir}}{{sdk_8035_file}}&quot;
</code></pre></div>
<p>Instruct the VI editor to open the Playbook with the same command used before:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>vi roles/was/tasks/main.yml
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">roles/was/tasks/main.yml</p>
<p><strong>Technical Sellers</strong>: Extend the Playbook to resemble the following template.</p>
<p><strong>Sellers</strong>: Leave the completed Playbook unmodified.</p>
</div>
<p>Press <code>ESC</code> followed by <code>:x</code> and <code>Return</code> to save and exit the Playbook.</p>
<p>Using <strong>loops</strong> saves administrators from having to write multiple tasks (repetitively and redundantly) to make use of the same module(s). For example, instead of writing five tasks to ensure five users exist, you can write one task that iterates over a list of five users to ensure they all exist. Ansible supports iterating a task over a set of items using the <em>loop</em> keyword. You can configure loops to repeat a task using each item in a list, the contents of each of the files in a list, a generated sequence of numbers, or using more complicated structures.</p>
<div class="admonition warning">
<p class="admonition-title">TECHNICAL SELLERS</p>
<p>As before, you can execute the Playbook at this stage to carry out the new modifications that have been added since the last execution.
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ansible-playbook was.yml -v
</code></pre></div></p>
</div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../03%20Staging%20and%20Execution/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Creating the Staging Directory for WAS, Copying Source Files, and Executing the Installer" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Creating the Staging Directory for WAS, Copying Source Files, and Executing the Installer
            </div>
          </div>
        </a>
      
      
        
        <a href="../05%20Launching%20WAS/" class="md-footer__link md-footer__link--next" aria-label="Next: Installation of WAS, Creation of a Profile, and Launching the Software" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Installation of WAS, Creation of a Profile, and Launching the Software
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>